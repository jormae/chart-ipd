(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{4479:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/summary-chart",function(){return t(4636)}])},4636:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(8520),o=t.n(r),c=t(5893),s=t(7294),a=t(9072),i=t(500),l=t(5499),u=t(9837),h=t(5084),d=t(4373),f=t(9742),x=t(1359),g=t(6388),m=t.n(g),p=t(244),v=t(9417),Z=t(3978),j=t(9807),w=t(7272),P=t(6777),_=t(918),b=t(3025),k=t(381),y=t.n(k),E=t(6501);function N(e,n,t,r,o,c,s){try{var a=e[c](s),i=a.value}catch(l){return void t(l)}a.done?n(i):Promise.resolve(i).then(r,o)}function T(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function s(e){N(c,r,o,s,a,"next",e)}function a(e){N(c,r,o,s,a,"throw",e)}s(void 0)}))}}var C=function(){y().locale("th");y()().add(543,"year").format("L");var e=localStorage.getItem("staffName"),n=(0,s.useState)({blogs:[]}),t=n[0],r=n[1],a=T(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.Z.baseURL+"/chart/summary-chart",e.prev=1,e.next=4,m().get(n);case 4:t=e.sent.data,r({blogs:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));(0,s.useEffect)((function(){a()}),[r]);var i=T(o().mark((function n(t){var r,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r={staffName:e},c=b.Z.baseURL+"/chart/summary-chart/".concat(t),m().put(c,r).then((function(e){console.log(e.data),"success"==e.data.status?(E.ZP.success(e.data.message),a()):E.ZP.error(e.data.errors[0].msg)})).catch((function(e){e.response?console.log(e):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))}catch(o){console.log(o)}case 1:case"end":return n.stop()}}),n)})));return(0,c.jsxs)(u.Z,{children:[(0,c.jsx)(E.x7,{}),(0,c.jsx)(f.Z,{title:"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e23\u0e31\u0e1a\u0e0a\u0e32\u0e23\u0e4c\u0e15",titleTypographyProps:{variant:"h6"}}),(0,c.jsx)(d.Z,{sx:{margin:0}}),(0,c.jsx)(x.Z,{children:(0,c.jsx)(P.Z,{component:_.Z,children:(0,c.jsxs)(p.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,c.jsx)(Z.Z,{children:(0,c.jsxs)(v.Z,{children:[(0,c.jsx)(w.Z,{align:"center",children:"\u0e0a\u0e37\u0e48\u0e2d\u0e41\u0e1e\u0e17\u0e22\u0e4c"}),(0,c.jsx)(w.Z,{align:"center",children:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e0a\u0e32\u0e23\u0e4c\u0e15"}),(0,c.jsx)(w.Z,{align:"center",children:"Action"})]})}),(0,c.jsx)(j.Z,{children:t.blogs.map((function(e){return(0,c.jsxs)(v.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,c.jsx)(w.Z,{component:"th",scope:"row",children:e.dischargeDoctor}),(0,c.jsx)(w.Z,{align:"center",children:e.TOTAL_CHART}),(0,c.jsx)(w.Z,{align:"center",children:(0,c.jsx)(h.Z,{variant:"contained",color:"success",size:"large",onClick:function(){return i(e.doctorCode)},children:"\u0e2a\u0e48\u0e07\u0e2a\u0e23\u0e38\u0e1b\u0e0a\u0e32\u0e23\u0e4c\u0e15"})})]},e.doctorCode)}))})]})})})]})};function S(e,n,t,r,o,c,s){try{var a=e[c](s),i=a.value}catch(l){return void t(l)}a.done?n(i):Promise.resolve(i).then(r,o)}var L=function(){var e,n=(e=o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=localStorage.getItem("token"),t=b.Z.baseURL+"/auth/token",fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then((function(e){return e.json()})).then((function(e){console.log(e),"success"!==e.status&&(localStorage.removeItem("token"),localStorage.removeItem("staffName"),window.location="/pages/login",console.log(e))})).catch((function(e){console.error("Error:",e)}));case 3:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var c=e.apply(n,t);function s(e){S(c,r,o,s,a,"next",e)}function a(e){S(c,r,o,s,a,"throw",e)}s(void 0)}))});return(0,s.useEffect)((function(){n()}),[]),(0,c.jsx)(i.Z,{children:(0,c.jsxs)(a.ZP,{container:!0,spacing:6,children:[(0,c.jsx)(a.ZP,{item:!0,xs:12,children:(0,c.jsx)(l.Z,{})}),(0,c.jsx)(a.ZP,{item:!0,xs:12,children:(0,c.jsx)(C,{})})]})})}}},function(e){e.O(0,[885,395,524,714,669,763,715,774,888,179],(function(){return n=4479,e(e.s=n);var n}));var n=e.O();_N_E=n}]);